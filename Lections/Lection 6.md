# Lection 6


## Введение в БД


### Реляционная алгебра.
---------------------



**Реляционная алгебра** - замкнутая система операций над отношениями в реляционной модели данных.  
**Реляционная модель данных** - логическая модель данных,в которой данные представлены в виде отношений, которые ограничены типом данных и поддерживают реляционное исчисление.  
 **Реляционная база данных** - совокупность отношений, содержащих всю информацию, которая хранится в базе.  

 **Отношения** - таблицы с данными.   
 **Домен** - множество допустимых значений, которые может принимать атрибут.  
 **Атрибут** - значения, которое могут принимать элементы домена.    
 **Строка** - совокупность атрибутов, соответствующих доменам.   
 **Кортеж** - строка таблицы.   
 **Первичный ключ**  - атрибут, который отднозначно идентифицирует конкретный кортеж.  

 <u>Основное свойство реляционной алгебры</u> - **замкнутность** (операций над отношениями
 задаются таким образом, что результатом всегда будет отношение).

 Первоначальный набор из 8 операций был предложен Э. Коддом в 1970-е годы и включал
как операции, которые до сих пор используются (проекция, соединение и т.д.),
так и операции, которые не вошли в употребление (например, деление отношений).

Основные операции реляционной алгебры:
1. Объединение - A UNION B. Результатом объединения двух отношений A и B будет отношение, с тем же
заголовком, что и у A и B, и телом, состоящем из картежей, принадлежащих обоим отношениям.  
В SQL: SELECT А.a, А,b FROM А UNION SELECT В.a, В.b FROM В

2. Пересечение - A INTERSECT B. Результатом пересечения двух отношений А и В будет отношение с с тем же
заголовком, что и у A и B, и телом, состоящем из картежей, принадлежащих одновременно обоим отношениям.   
В SQL: SELECT A.a, A,b FROM A, B WHERE A.a=B.a AND A.b=B.b

3. Вычитание - A MINUS B.  Результатом вычитания отношения В из отношения А, будет отношение с тем же
заголовком, что и у А и В и телом, состоящем из кортежей, принадлежащих отношению А и
не принадлежащих отношению В.  
В SQL: SELECT A.a, A.b FROM A WHERE NOT EXIST (SELECT B.a, B.b FROM B WHERE
B.a=A.a AND B.b=A.b)

4. Декартово произведение - A TIMES B.  Результатом декартового произведения двух отношений будет отношение,
загловок которого является сцеплением двух других, а тело состоит из всевозможных упорядоченных
пар кортежей отношений.   
В SQL: SELECT * FROM A, B

5. Выборка. Выборкой на отношение А с условием С называется отношение с тем же заголовком,
что и у А и телом, состоящем из кортежей, значения атрибутов которых при подстановке
в условие С дают значение(=true). Где С-логическое выражение, в которое могут входить
атрибуты А или скаляры.  
В SQL: SELECT * FROM B WHERE C

6. Проекция.  Результатом будет вертикальный срез отношения, в котором удалены все
возникшие при таком срезе дубликаты кортежей.   
В SQL: SELECT L FROM В (L- список атрибутов отношения В)

7. Соединение. Виды соединения:
  *  Общая операция соединения - (A TIMES B) WHERE C - результат последовательного применения операции
  декартового произведения и выборки.   
  В SQL: SELECT * FROM A,B WHERE C

  * Экви-соединение - A [x = y] B - Операция соединения называется операцией
эквисоединения, если условие соединения имеет вид ( a = b ), где a и b – атрибуты разных операндов
соединения. Кроме того, в результат попадает только один из одинаковых атрибутов.  
В SQL: SELECT A.a, A.b, B.b FROM A INNER JOIN B ON A.a=B.a
 * Внешние соединения (левое и правое) - еще один вид операции соединения, в которой кортежи
левого (правого) отношения, которым не соответствует ни одного кортежа в другом операнде,
включаются в результат с NULL-значениями в качестве значений атрибутов второго отношения.   
В SQL: SELECT A.a, A.b, B.b FROM A LEFT JOIN B ON A.a=B.a
       SELECT A.a, A.b, B.b FROM A RIGHT JOIN B ON A.a=B.a

 * Полусоединение – проекция результата естественного соединения отношений А и В на атрибуты,
которые входят только в отношение А.   
В SQL: SELECT А.a, А.b FROM А INNER JOIN В ON А.a=В.a

* Деление отношений - (A DIVIDE BY B). Пусть заданы два отношения – A с заголовком {a1, a2,...,
an, b1, b2, ..., bm} и B с заголовком {b1, b2, ..., bm}.результатом деления A на B (A DIVIDE BY B) является "унарное" отношение C{a},
тело которого состоит из кортежей v таких, что в теле отношения A содержатся кортежи v UNION w
такие, что множество {w} включает тело отношения B. Таким образом, в деление входят те кортежи
отношения А (только собственные атрибуты), которые соответствуют по совместным атрибутам всем кортежам отношения В.   
В SQL: SELECT DISTINCT A.a FROM A WHERE NOT EXIST (SELECT * FROM B WHERE
NOT EXIST (SELECT * FROM A.A1 WHERE A1.X=A.X AND A1.Y=B.Y))

<u>Расширенная реляционная алгебра включается операции:</u>
*  Операция устранения дубликатов:  
В SQL: SELECT DISTINCT * FROM R1

* Операция сортировки:  
В SQL: SELECT * FROM A ORDER BY L

* Операция агрегирования:  
В SQL: SELECT L, агр.атр. FROM A GROUP BY L [HAVING условие]
