# Practice 3
==========================================================

## Введение в БД

### SQL. PostgreSQL.
------------------
Мы будем знакомиться с БД на основе PostgreSQL.
В первую очередь мы изучим основы работы с БД.
Многие из этого переносимо на другие СУБД, т.к. мы познакомимся с
теоретическим фундаментом в виде релационной алгебры и стандартом SQL92,
который поддерживается большинством СУБД.

Последнюю версию PostgreSQL можно скачать на сайте http://www.postgresql.org.
Для того, чтобы скачать дистрибутив, перейдите на страницу загрузки,
выберите операционную систему и загрузите дистрибутив. После этого запустите установщик.

После установки мы увидем:
* pgAdmin III – это один из клиентов для сервера PostgreSQL, удобное средство
для администрирования сервера PostgreSQL и создания баз данных, так как имеет
все необходимые для этого инструменты и интуитивно понятный графический
интерфейс.
* SQL Shell (psql) — основное, «родное» консольное средство управления сервером и выполнения запросов.

### Создание БД.

Работу мы начнем с создания БД. Любые действия происходят от лица какого-либо
пользователя. Для создания нам необходимо иметь соответствующие привелегия
(быть суперпользователем).

>   su postgres -c psql

> psql -U postgres
> CREATE DATABASE dbName;

БД информацию о БД (метаинформацию) хранят так же в БД. Поэтому с помощью тех же
SQL-запросов можно получить различную информацию о самой БД. Но для многих
команд есть сокращенные варианты. Посмотреть их список можно следующим образом:
>  \?

Посмотреть списко существующих баз:
>  \l

Стандарт записи SQL-команды для создания бд:

> CREATE DATABASE name
    [ [ WITH ] [ OWNER [=] user_name ]
           [ TEMPLATE [=] template ]
           [ ENCODING [=] encoding ]
           [ LC_COLLATE [=] lc_collate ]
           [ LC_CTYPE [=] lc_ctype ]
           [ TABLESPACE [=] tablespace ]
           [ CONNECTION LIMIT [=] connlimit ] ]

<i>По поводу Encoding, Collate, CType. Для чего они? Почему задаются при создании БД?
Encoding - используйте UTF8. Это стандарт.
Collate - влияет на сортировку. И от этого зависит то, как будут строится внутренние структуры (например, индексы).
Поэтому их необходимо задавать при создании. И после изменить нельзя.
</i>


### Команды для psql.
Запускаем psql под пользователем postgres:

>   su postgres -c psql

Оператор CREATE:

> CREATE DATABASE dbname WITH ENCODING='UNICODE';

> CREATE USER dbuser WITH PASSWORD 'dbpass';

> GRANT ALL PROVILEGES ON DATABASE dbname TO dbuser;

Оператор DROP:

> DROP DATABASE dbName;

Оператор ALTER:

> ALTER DATABASE dbName RENAME TO newDBName;
-- <i>Переименуем нашу БД</i>

> ALTER DATABASE dbName OWNER TO userName;
--<i>Изменим владельца БД</i>

> ALTER DATABASE dbName SET key value;
